{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Spinner/Spinner.js","components/Notification/Notification.js","components/Modal/Modal.js","services/pixabayAPI.js","App.js","index.js"],"names":["Searchbar","state","value","handleChange","event","setState","target","handleSubmit","preventDefault","props","onSubmit","className","this","type","onChange","placeholder","Component","ImageGalleryItem","webformatURL","largeImageURL","onShowModal","src","alt","onClick","defaultProps","ImageGallery","gallery","map","id","Button","onLoadMore","Spinner","color","height","width","timeout","Notification","message","Modal","instance","basicLightbox","handleKeydown","code","onClose","close","handleClick","nodeName","window","addEventListener","removeEventListener","show","queryString","assembly","Object","keys","key","join","fetch","then","res","json","App","q","image_type","per_page","page","error","loading","fetchQuery","pixabayAPI","hits","prevState","catch","console","log","finally","handleChangeQuery","searchQuery","loadMore","scroll","scrollTo","top","document","documentElement","scrollHeight","behavior","closeModal","showModal","dataset","image","prevProps","length","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.e5812c63.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    value: \"\",\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ value: event.target.value });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.value);\r\n    this.setState({ value: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\" onSubmit={this.handleSubmit}>\r\n        <form className=\"SearchForm\">\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}\r\n            // autocomplete=\"off\"\r\n            // autofocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function ImageGalleryItem({\r\n  webformatURL,\r\n  largeImageURL,\r\n  onShowModal,\r\n}) {\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={webformatURL}\r\n        alt=\"\"\r\n        className=\"ImageGalleryItem-image\"\r\n        data-image={largeImageURL}\r\n        onClick={onShowModal}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.defaultProps = {\r\n  webformatURL:\r\n    \"https://image.freepik.com/free-vector/man-sitting-on-big-question-mark-symbol_24381-1192.jpg\",\r\n  largeImageURL:\r\n    \"https://image.freepik.com/free-vector/man-sitting-on-big-question-mark-symbol_24381-1192.jpg\",\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string,\r\n  largeImageURL: PropTypes.string,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport ImageGalleryItem from \"./ImageGalleryItem\";\r\n\r\nexport default class ImageGallery extends Component {\r\n  render() {\r\n    let { gallery, onShowModal } = this.props;\r\n    return (\r\n      <ul className=\"ImageGallery\">\r\n        {gallery.map(({ id, webformatURL, largeImageURL }) => (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            webformatURL={webformatURL}\r\n            largeImageURL={largeImageURL}\r\n            onShowModal={onShowModal}\r\n          />\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Button({ onLoadMore }) {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onLoadMore}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\n\r\nexport default function Spinner() {\r\n  return (\r\n    <div className=\"spinner\">\r\n      <Loader\r\n        type=\"ThreeDots\"\r\n        color=\"#00BFFF\"\r\n        height={80}\r\n        width={80}\r\n        timeout={3000}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Notification({ message }) {\r\n  return <h2>{message}</h2>;\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport * as basicLightbox from \"basiclightbox\";\r\nimport \"../../../node_modules/basiclightbox/dist/basicLightbox.min.css\";\r\n\r\nexport default class Modal extends Component {\r\n  state = {\r\n    instance: basicLightbox.create(`\r\n\t<img src=\"${this.props.largeImageURL}\" width=\"800\" height=\"600\"/>    \r\n`),\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeydown);\r\n    window.addEventListener(\"click\", this.handleClick);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeydown);\r\n    window.removeEventListener(\"click\", this.handleClick);\r\n  }\r\n\r\n  handleKeydown = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClose();\r\n      this.state.instance.close();\r\n    }\r\n  };\r\n\r\n  handleClick = (event) => {\r\n    if (event.target.nodeName !== \"IMG\") {\r\n      this.props.onClose();\r\n      this.state.instance.close();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <>{this.state.instance.show()}</>;\r\n  }\r\n}\r\n","const baseURL =\r\n  \"https://pixabay.com/api/?key=22629513-0416b1734fff54844a0105211\";\r\n// \"https://pixabay.com/ap/?key=22629513-0416b1734fff54844a01052\";\r\n\r\nconst fetchGalleryImages = (queryString) => {\r\n  let assembly = Object.keys(queryString)\r\n    .map((key) => {\r\n      return \"&\" + key + \"=\" + queryString[key];\r\n    })\r\n    .join(\"\");\r\n  return fetch(`${baseURL}${assembly}`).then((res) => res.json());\r\n};\r\n\r\nexport default { fetchGalleryImages };\r\n","import React, { Component } from \"react\";\n\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\nimport Button from \"./components/Button/Button\";\nimport Spinner from \"./components/Spinner/Spinner\";\nimport Notification from \"./components/Notification/Notification\";\nimport Modal from \"./components/Modal/Modal\";\nimport pixabayAPI from \"./services/pixabayAPI\";\n\nexport default class App extends Component {\n  state = {\n    gallery: [],\n    queryString: { q: \"\", image_type: \"all\", per_page: 12, page: 1 },\n    error: false,\n    loading: false,\n    largeImageURL: \"\",\n  };\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   return (\n  //     nextState.gallery !== this.state.gallery ||\n  //     nextState.queryString !== this.state.queryString\n  //   );\n  // }\n\n  componentDidMount() {\n    this.fetchQuery();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.queryString !== this.state.queryString) this.fetchQuery();\n    this.scroll();\n  }\n\n  fetchQuery = () => {\n    this.setState({ loading: true });\n    let { queryString } = this.state;\n    pixabayAPI\n      .fetchGalleryImages(queryString)\n      .then(({ hits }) =>\n        this.setState((prevState) => ({\n          gallery: [...prevState.gallery, ...hits],\n        }))\n      )\n      .catch((error) => {\n        console.log(error);\n        return this.setState({ error: error });\n      })\n      .finally(() => {\n        this.setState({ loading: false });\n      });\n  };\n\n  handleChangeQuery = (searchQuery) => {\n    this.setState((prevState) => ({\n      gallery: [],\n      queryString: { ...prevState.queryString, q: searchQuery, page: 1 },\n    }));\n  };\n\n  loadMore = () => {\n    this.setState((prevState) => ({\n      queryString: {\n        ...prevState.queryString,\n        page: prevState.queryString.page + 1,\n      },\n    }));\n  };\n\n  scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  closeModal = () => {\n    this.setState({ largeImageURL: \"\" });\n  };\n\n  showModal = (event) => {\n    this.setState({\n      largeImageURL: event.target.dataset.image,\n    });\n  };\n\n  render() {\n    let { gallery, error, loading, largeImageURL } = this.state;\n    // console.log(this.state);\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleChangeQuery} />\n        {error && <Notification message={error.message} />}\n        {gallery.length > 0 && (\n          <ImageGallery gallery={gallery} onShowModal={this.showModal} />\n        )}\n        {loading && <Spinner />}\n        {gallery.length > 0 && <Button onLoadMore={this.loadMore} />}\n        {largeImageURL && (\n          <Modal largeImageURL={largeImageURL} onClose={this.closeModal} />\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./styles.css\";\n\nReactDOM.render(<App />, document.querySelector(\"#root\"));\n"],"sourceRoot":""}